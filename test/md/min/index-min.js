function translate(t){article.appendChild(new Md(t))}var Md=function(t){"use strict";function n(t,n){var e=new i,r=e.parse(t),o=r.toHtml();return this.options=n,o}var e=function(){function t(){this.list={}}return t.prototype.add=function(t,n){this.list[t]=n},t.prototype.rm=function(t){delete this.list[t]},t.prototype.get=function(t){return this.list[t]||null},t.prototype.forEach=function(t){var n,e=this.list;for(n in e)e.hasOwnProperty(n)&&t.call(this,n,e[n])},t.prototype.clone=function(){},t}(),r=function(){function t(t){this.tag=t,this.attr=new e,this.children=[]}return t.prototype.attr=function(t,n){return"undefined"==typeof n?this.attr.get(t):this.attr.add(t,n);return this},t.prototype.rmAttr=function(t){return this.attr.rm(t),this},t.prototype.addChild=function(t){return this.children.push(t),this},t.prototype.toHtml=function(){var t=null,n=this.children,e=-1,r=n.length;for(t=""===this.tag?document.createDocumentFragment():document.createElement(this.tag);++e<r;)t.appendChild(n[e].toHtml());return t},t}(),o=function(){function t(t){this.text=t}return t.prototype.toHtml=function(){return document.createTextNode(this.text)},t}(),i=function(t){function n(){}function e(t){return t.replace(/(\r\n|\n|\r)/g,"\n")}var i=function(t){function n(){this.blockGrammar=new u}return n.prototype.parse=function(t){var n=/([\s\S]+?)($|\n#|\n(?:\s*\n?|$)+)/g,e=[],o=null,i=null,u=new r("");for(o=/^(\s*\n)/.exec(t),null!==o&&(n.lastIndex=o[0].length),o=n.exec(t);null!==o;)e.push(o[1]),o=n.exec(t);for(;e.length;)i=this.blockGrammar.parse(e.shift(),e),null!==i&&u.addChild(i);return u},n}(),u=function(t,n){function e(){}var r=[];return e.prototype.parse=function(t,n){for(var e=-1,o=r.length,i=null,u=null;++e<o&&(u=new r[e],i=u.parse(t,n),null===i););return i},e.expend=function(t){r.push(t)},e}(this);return function(t){function n(){}var e=/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/;n.prototype.parse=function(t,n){if(!e.test(t))return null;var i=t.match(e),u=new r("h"+i[1].length);return u.addChild(new o(i[2])),i[0].length<t.length&&n.push(t.substr(i[0].length)),u},u.expend(n)}(),function(t){function n(){}n.prototype.parse=function(t){var n=new r("p");return n.addChild(new o(t)),n},u.expend(n)}(),n.prototype.parse=function(t){var n=new i;return n.parse(e(t))},n}();return n}(),textarea=document.getElementById("editor"),article=document.getElementById("article"),str=textarea.value;textarea.onekeydown=function(){str=textarea.value,translate(str)},translate(str);