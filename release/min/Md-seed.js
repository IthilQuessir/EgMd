!function(t,n){"use strict";function e(t){for(var n=t.split("/"),e=0,i=n.length,r=o;e<i;e++){if(!(n[e]in r))throw new Error("[Md require] Cannot find the module;\nThe url is "+t);r=r[n[e]]}if(n in o)return o[name];throw new Error("CANNOT ")}function i(t,n){for(var i=t.split("/"),r=0,s=i.length-1,h=o,u=null;r<s;r++)i[r]in h||(h[i[r]]={}),h=h[i[r]];if(i[r]in h)throw new Error("[Md extend] Module had existed;\nThe Url is "+t);if(u=n.call(h,e),!u)throw new Error('[Md extend] the module "'+i[r]+'"had existed');h[i[r]]=u}function r(t,n){var e=new Dialect,i=e.parse(t),r=i.toHtml();return this.options=n,r}var o={};r.prototype.extend=i,t.Md=r}(this),Md.extend("attr",function(t){function n(){this.list={}}return n.prototype.add=function(t,n){this.list[t]=n},n.prototype.rm=function(t){delete this.list[t]},n.prototype.get=function(t){return this.list[t]||null},n.prototype.forEach=function(t){var n,e=this.list;for(n in e)e.hasOwnProperty(n)&&t.call(this,n,e[n])},n.prototype.clone=function(){},n}),Md.extend("dialect-builder",function(t){function n(){this.syntaxLib={}}function e(){this.list=[]}n.prototype.parse=function(t){if(!("block"in this.syntaxLib))throw new Error("[Dialect parse] Dialect must has extend block module");this.syntaxLib.block(t)},n.prototype.extend=function(t,n){this.syntaxLib[t]=new n(this)},n.prototype.getSyntax=function(t){if(t in this.syntaxLib)return this.syntaxLib[t];throw new Error("[Dialect getSyntax] This dialect hasn't syntax named "+t)},e.prototype.addSyntax=function(t){this.list.push.apply(this.list,t)},e.prototype.build=function(){for(var e=0,i=this.list.length,r=null,o=new n;e<i;e++)r=t(this.list[e]),o.extend(this.list[e],r)}}),Md.extend("node",function(t){function n(t){this.__tag__=t?t:"",this.__attr__=new e,this.children=[]}var e=t("attr");return n.prototype.attr=function(t,n){return"undefined"==typeof n?this.__attr__.get(t):this.__attr__.add(t,n)},n.prototype.rmAttr=function(t){return this.__attr__.rm(t),this},n.prototype.appendChild=function(t){return this.children.push(t),this},n.prototype.toHtml=function(){var t=null,n=this.children,e=-1,i=n.length;for(""===this.__tag__?t=document.createDocumentFragment():(t=document.createElement(this.__tag__),this.__attr__.forEach(function(n,e){t.setAttribute(n,e)}));++e<i;)t.appendChild(n[e].toHtml());return t},n}),Md.extend("text-node",function(t){function n(t){this.text=t}return n.prototype.toHtml=function(){return document.createTextNode(this.text)},n});