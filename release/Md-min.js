var Md=function(n){"use strict";function t(n,t){var e=new o,r=e.parse(n),u=r.toHtml();return this.options=t,u}var e=function(){function n(){this.list={}}return n.prototype.add=function(n,t){this.list[n]=t},n.prototype.rm=function(n){delete this.list[n]},n.prototype.get=function(n){return this.list[n]||null},n.prototype.forEach=function(n){var t,e=this.list;for(t in e)e.hasOwnProperty(t)&&n.call(this,t,e[t])},n.prototype.clone=function(){},n}(),r=function(){function n(n){this.__tag__=n,this.__attr__=new e,this.children=[]}return n.prototype.attr=function(n,t){return"undefined"==typeof t?this.__attr__.get(n):this.__attr__.add(n,t);return this},n.prototype.rmAttr=function(n){return this.__attr__.rm(n),this},n.prototype.appendChild=function(n){return this.children.push(n),this},n.prototype.toHtml=function(){var n=null,t=this.children,e=-1,r=t.length;for(""===this.__tag__?n=document.createDocumentFragment():(n=document.createElement(this.__tag__),this.__attr__.forEach(function(t,e){n.setAttribute(t,e)}));++e<r;)n.appendChild(t[e].toHtml());return n},n}(),u=function(){function n(n){this.text=n}return n.prototype.toHtml=function(){return document.createTextNode(this.text)},n}(),o=function(n){function t(){}function e(n){return n.replace(/(\r\n|\n|\r)/g,"\n")}var o=function(){function n(){}var t=[];return n.expend=function(n){t.push(n)},n.prototype.parse=function(n){for(var e=[n],u=null,o=-1,s=t.length,i=null,p=null,l=new r("");e.length;){for(o=-1,n=e.pop();++o<s;)if(p=[],u=new t[o],i=u.parse(n,p),p.length&&null===i)p.reverse(),n=p.pop(),e.push.apply(e,p);else{if(p.length){p.reverse(),e.push.apply(e,p);break}if(null!==i)break}null!==i&&l.appendChild(i)}return l},n}();!function(){function n(){}n.prototype.parse=function(n,t){var e=/\\([\\`\*_{}\[\]()#\+.!\-])/,r=e.exec(n),o=null;return e.test(n)?0===r.index?(t.push(n.substr(r[0].length)),new u(r[1])):(t.push(n.substring(0,r.index)),t.push(n.substr(r.index)),null):null;return o},o.expend(n)}(),function(){function n(){}n.prototype.parse=function(n){return new u(n)},o.expend(n)}();var s=function(n){function t(){this.blockGrammar=new i}return t.prototype.parse=function(n){var t=/([\s\S]+?)($|\n(?:\s*\n|\s*$)+)/g,e=[],u=null,o=null,s=new r("");for(u=/^(\s*\n)/.exec(n),null!==u&&(t.lastIndex=u[0].length),u=t.exec(n);null!==u;)e.push(u[1]),u=t.exec(n);for(e.reverse();e.length;)o=this.blockGrammar.parse(e.pop(),e),null!==o&&s.appendChild(o);return s},t}(),i=function(n,t){function e(){}var r=[];return e.prototype.parse=function(n,t){for(var e=-1,u=r.length,o=null,s=null,i=null;++e<u;)if(s=new r[e],i=[],o=s.parse(n,i),i.length&&null===o)i.reverse(),n=i.pop(),t.push.apply(t,i);else{if(i.length){i.reverse(),t.push.apply(t,i);break}if(null!==o)break}return o},e.expend=function(n){r.push(n)},e}(this);return function(n){function t(){}var e=/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/;t.prototype.parse=function(n,t){if(!e.test(n))return null;var o=n.match(e),s=new r("h"+o[1].length);return s.appendChild(new u(o[2])),o[0].length<n.length&&t.push(n.substr(o[0].length)),s},i.expend(t)}(),function(){function n(){}n.prototype.parse=function(n,t){var e=/^(.*)\n([-=])\2\2+(?:\n|$)/,u=null,s="",i=null,p=null;return e.test(n)?(u=n.match(e),s="="===u[2]?"h1":"h2",i=new r(s),p=new o,i.appendChild(p.parse(u[1])),u[0].length<n.length&&t.push(n.substr(u[0].length)),i):null},i.expend(n)}(),function(){function n(){}var t={dash:"dash",underline:"underline",asterisk:"asterisk"};n.prototype.parse=function(n,e){var u=/^(?:([\s\S]*?)\n)?[ \t]*(([-_*])(?:[ \t]*\3){2,})[ \t]*(?:\n([\s\S]*))?$/,o=n.match(u),s=null;if(!o)return null;if(o[1])return e.push(o[1]),e.push(o[2]),o[4]&&e.push(o[4]),null;switch(s=new r("hr"),o[3]){case"-":s.attr("class",t.dash);break;case"_":s.attr("class",t.underline);break;case"*":s.attr("class",t.asteris)}return o[4]&&e.push(o[4]),s},i.expend(n)}(),function(n){function t(){}t.prototype.parse=function(n){var t=new r("p"),e=new o;return t.appendChild(e.parse(n)),t},i.expend(t)}(),t.prototype.parse=function(n){var t=new s;return t.parse(e(n))},t}();return t}();